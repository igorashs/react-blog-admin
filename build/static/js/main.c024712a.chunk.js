(this["webpackJsonpreact-blog-editor"]=this["webpackJsonpreact-blog-editor"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return i}));var r=n(4),a=n(21),c=n.n(a),u=n(0);function o(e){e instanceof Array&&e.forEach((function(e){if(e.date)return e.timestamp=c()(e.date).calendar()}))}function s(e){e.sort((function(e,t){return e.date>t.date?-1:e.date<t.date?1:0}))}function l(){localStorage.removeItem("token"),window.location.reload()}function i(){var e=Object(u.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(u.useEffect)((function(){a(localStorage.getItem("token"))}),[]),n}},11:function(e,t,n){"use strict";function r(e){return e?e.length>15?"should be less than 15 characters":"":"is required"}function a(e){return e?"":"is required"}function c(e){return e?e.length>80?"should be less than 80 characters":"":"is required"}function u(e){return e?e.length>7300?"should be less than 7300 characters":"":"is required"}n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u}))},23:function(e,t,n){e.exports=n(39)},28:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),u=n.n(c),o=(n(28),n(1)),s=n.n(o),l=n(3),i=n(4);function m(e){return a.a.createElement("p",{className:e.status?"Online":"Offline"},e.status?"Online":"Offline")}var p=n(12),f=n(2),d=n(9),b=n(10);n(31);var h=function(){return a.a.createElement("div",{className:"Loading"},a.a.createElement("svg",{className:"Loading-img",xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})))};n(37);var E=function(){var e=Object(b.d)(),t=Object(f.g)().state,n=function(e){var t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){(function(){var t=Object(l.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.d)(e);case 2:(n=t.sent).error?c([]):(Object(b.a)(n),c(n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),[a,c]}(t._id),c=Object(i.a)(n,2),u=c[0],o=c[1];function m(e){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.currentTarget.dataset.commentid,n.next=3,Object(d.b)(t._id,a,e);case 3:204===n.sent.status?o(u.filter((function(e){return e._id!==a}))):window.alert("Something went wrong!");case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("ye"),n.next=3,Object(d.c)(t._id,e);case 3:204===n.sent.status?window.location.reload():window.alert("Something went wrong!");case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return a.a.createElement("article",{className:"PostPage"},a.a.createElement("section",{className:"PostMenu"},a.a.createElement("ul",{className:"PostMenuList"},a.a.createElement("li",null,a.a.createElement(p.b,{to:{pathname:"/posts/".concat(t._id,"/edit/"),state:t},className:"EditBtn MenuBtn"},"Edit")),a.a.createElement("li",null,a.a.createElement("button",{className:"DeleteBtn MenuBtn",onClick:function(){return E.apply(this,arguments)}},"Delete")))),a.a.createElement("header",null,a.a.createElement("h1",null,a.a.createElement("span",{className:"Italic"},t.title),a.a.createElement("p",{className:"Date"},t.isPublished?"Posted: ":"Last Update: "," ",t.timestamp))),a.a.createElement("section",{className:"PostText"},a.a.createElement("p",null,t.text)),a.a.createElement("footer",null,a.a.createElement("section",{className:"PostComments"},a.a.createElement("h2",null,"Comments"),u.length>0?a.a.createElement("ul",null,u.map((function(e){return a.a.createElement("li",{key:e._id},a.a.createElement("article",{className:"PostComment"},a.a.createElement("h3",null,e.username),a.a.createElement("div",null,a.a.createElement("p",{className:"CommentText"},e.text),a.a.createElement("p",{className:"CommentDate"},e.timestamp)),a.a.createElement("button",{className:"DeleteBtn MenuBtn","data-commentid":e._id,onClick:m},"Delete")))}))):"No Comments")))},v=n(11);var O=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(null),o=Object(i.a)(u,2),m=o[0],p=o[1],f=Object(r.useState)(!1),h=Object(i.a)(f,2),E=h[0],O=h[1],j=Object(r.useState)(""),x=Object(i.a)(j,2),w=x[0],g=x[1],y=Object(r.useState)(""),N=Object(i.a)(y,2),k=N[0],S=N[1],T=Object(b.d)();function P(){return(P=Object(l.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Object(v.c)(n),a=Object(v.b)(m),!r&&!a){e.next=8;break}g(r),S(a),e.next=12;break;case 8:return e.next=10,Object(d.a)({title:n,text:m,isPublished:E,date:new Date},T);case 10:201!==e.sent.status?(g("invalid"),S("invalid")):window.location.reload();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){null!==n&&g(Object(v.c)(n))}),[n]),Object(r.useEffect)((function(){null!==m&&S(Object(v.b)(m))}),[m]),a.a.createElement("main",null,a.a.createElement("header",null,a.a.createElement("h2",null,"New Post")),a.a.createElement("section",{className:"PostFormSection "+((w||k)&&"FormError")},a.a.createElement("form",{className:"PostForm",onSubmit:function(e){return P.apply(this,arguments)}},a.a.createElement("label",{htmlFor:"Title",className:w&&"Error"},"Title ",w),a.a.createElement("input",{id:"Title",type:"text",onChange:function(e){c(e.currentTarget.value)}}),a.a.createElement("label",{htmlFor:"Text",type:"text",className:k&&"Error"},"Text ",k),a.a.createElement("textarea",{id:"Text",onChange:function(e){p(e.currentTarget.value)}}),a.a.createElement("div",{className:"FormOptions"},a.a.createElement("button",{id:"PublishBtn",className:"Btn",onClick:function(){return O(!0)}},"Publish"),a.a.createElement("button",{id:"SaveBtn",className:"Btn",onClick:function(){return O(!1)}},"Save")))))};var j=function(){var e=Object(f.g)().state,t=Object(r.useState)(e.title),n=Object(i.a)(t,2),c=n[0],u=n[1],o=Object(r.useState)(e.text),m=Object(i.a)(o,2),p=m[0],h=m[1],E=Object(r.useState)(e.isPublished),O=Object(i.a)(E,2),j=O[0],x=O[1],w=Object(r.useState)(""),g=Object(i.a)(w,2),y=g[0],N=g[1],k=Object(r.useState)(""),S=Object(i.a)(k,2),T=S[0],P=S[1],B=Object(b.d)();function C(){return(C=Object(l.a)(s.a.mark((function t(n){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=Object(v.c)(c),a=Object(v.b)(p),!r&&!a){t.next=8;break}N(r),P(a),t.next=12;break;case 8:return t.next=10,Object(d.h)(e._id,{title:c,text:p,isPublished:j,date:new Date},B);case 10:204!==t.sent.status?(N("invalid"),P("invalid")):window.location.reload();case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){null!==c&&N(Object(v.c)(c))}),[c]),Object(r.useEffect)((function(){null!==p&&P(Object(v.b)(p))}),[p]),a.a.createElement("main",null,a.a.createElement("header",null,a.a.createElement("h2",null,"Edit Post")),a.a.createElement("section",{className:"PostFormSection "+((y||T)&&"FormError")},a.a.createElement("form",{className:"PostForm",onSubmit:function(e){return C.apply(this,arguments)}},a.a.createElement("label",{htmlFor:"Title",className:y&&"Error"},"Title ",y),a.a.createElement("input",{id:"Title",type:"text",onChange:function(e){u(e.currentTarget.value)},value:c}),a.a.createElement("label",{htmlFor:"Text",type:"text",className:T&&"Error"},"Text ",T),a.a.createElement("textarea",{id:"Text",onChange:function(e){h(e.currentTarget.value)},value:p}),a.a.createElement("div",{className:"FormOptions"},a.a.createElement("button",{id:"PublishBtn",className:"Btn",onClick:function(){return x(!j)}},e.isPublished?"Unpublish":"Publish"),a.a.createElement("button",{id:"SaveBtn",className:"Btn"},"Save")))))},x=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,42))})),w=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,43))}));var g=function(){var e=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=function(){var t=Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.f)();case 2:t.sent.error?(console.error("Failed connection to API, Try to reconnect in 10sec"),a(!1),setTimeout(e,1e4)):a(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()})),n}(),t=Object(b.d)();return a.a.createElement(p.a,{basename:"/"},a.a.createElement("header",{className:"App_Header"},a.a.createElement("nav",{className:"App_Nav"},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(p.b,{to:"/"},"BlogEditor")))),a.a.createElement("div",{className:"Status"},a.a.createElement(m,{status:e}),t?a.a.createElement("a",{href:"#",onClick:y},"Logout"):"")),a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(f.d,null,a.a.createElement(f.b,{path:"/posts/new",exact:!0},t?a.a.createElement(O,null):a.a.createElement(f.a,{to:"/login"})),a.a.createElement(f.b,{path:"/posts/:postId",exact:!0},t?a.a.createElement(E,null):a.a.createElement(f.a,{to:"/login"})),a.a.createElement(f.b,{path:"/posts/:postId/edit",exact:!0},t?a.a.createElement(j,null):a.a.createElement(f.a,{to:"/login"})),a.a.createElement(f.b,{path:"/login"},t?a.a.createElement(f.a,{to:"/"}):a.a.createElement(x,null)),a.a.createElement(f.b,{path:"/"},t?a.a.createElement(w,null):a.a.createElement(f.a,{to:"/login"})))))};function y(){localStorage.removeItem("token"),window.location.reload()}n(38);var N=g;u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(N,null)),document.getElementById("root"))},9:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return O})),n.d(t,"h",(function(){return x}));var r=n(1),a=n.n(r),c=n(3),u="https://aqueous-woodland-72578.herokuapp.com/";function o(){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(u);case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function l(e){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(r=e.sent).validationError){e.next=13;break}if("Invalid password"!==r.validationError){e.next=10;break}return e.abrupt("return",{error:r.validationError,passwordError:!0});case 10:if("Invalid username"!==r.validationError){e.next=12;break}return e.abrupt("return",{error:r.validationError,usernameError:!0});case 12:return e.abrupt("return",{error:r.validationError,unknownError:!0});case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"posts/"),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"posts/").concat(t,"/comments/"));case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function b(e,t,n){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"posts/").concat(t,"/comments/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r)}});case 3:return c=e.sent,e.abrupt("return",c);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(e,t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"posts/").concat(t,"/"),{method:"Delete",headers:{Authorization:"Bearer ".concat(n)}});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"posts/new/"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function x(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"posts/").concat(t,"/"),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return c=e.sent,e.abrupt("return",c);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}}},[[23,1,2]]]);
//# sourceMappingURL=main.c024712a.chunk.js.map